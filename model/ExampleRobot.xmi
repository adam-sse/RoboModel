<?xml version="1.0" encoding="UTF-8"?>
<robo:Robot
    xmi:version="2.0"
    xmlns:xmi="http://www.omg.org/XMI"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:command="http://www.example.org/robo/command"
    xmlns:condition="http://www.example.org/robo/condition"
    xmlns:expression="http://www.example.org/robo/expression"
    xmlns:robo="http://www.example.org/robo"
    xsi:schemaLocation="http://www.example.org/robo/command robo.ecore#//command http://www.example.org/robo/condition robo.ecore#//condition http://www.example.org/robo/expression robo.ecore#//expression http://www.example.org/robo robo.ecore">
  <programms
      name="SomeProgram">
    <commands
        xsi:type="command:Assignment"
        variable="i">
      <value
          xsi:type="expression:Literal"/>
    </commands>
    <commands
        xsi:type="command:Assignment"
        variable="STEP">
      <value
          xsi:type="expression:Literal"
          value="5.0"/>
    </commands>
    <commands
        xsi:type="command:Assignment"
        variable="turn">
      <value
          xsi:type="expression:Variable"
          name="STEP"/>
    </commands>
    <commands
        xsi:type="command:Assignment"
        variable="THRESHOLD">
      <value
          xsi:type="expression:Literal"
          value="0.2"/>
    </commands>
    <commands
        xsi:type="command:Loop">
      <condition
          xsi:type="condition:Comparison">
        <left
            xsi:type="expression:Variable"
            name="i"/>
        <right
            xsi:type="expression:Literal"
            value="1000.0"/>
      </condition>
      <commands
          xsi:type="command:Branch">
        <condition
            xsi:type="condition:Comparison"
            operator="LESS_OR_EQUAL">
          <left
              xsi:type="expression:Variable"
              name="sensor"/>
          <right
              xsi:type="expression:Variable"
              name="THRESHOLD"/>
        </condition>
        <commands
            xsi:type="command:Assignment"
            variable="turn">
          <value
              xsi:type="expression:Variable"
              name="STEP"/>
        </commands>
        <commands
            xsi:type="command:Drive">
          <until
              xsi:type="condition:Comparison"
              operator="GREATER">
            <left
                xsi:type="expression:Variable"
                name="sensor"/>
            <right
                xsi:type="expression:Variable"
                name="THRESHOLD"/>
          </until>
        </commands>
      </commands>
      <commands
          xsi:type="command:Branch">
        <condition
            xsi:type="condition:Comparison"
            operator="GREATER">
          <left
              xsi:type="expression:Variable"
              name="sensor"/>
          <right
              xsi:type="expression:Variable"
              name="THRESHOLD"/>
        </condition>
        <commands
            xsi:type="command:Drive"
            direction="LEFT">
          <distance
              xsi:type="expression:Variable"
              name="turn"/>
        </commands>
        <commands
            xsi:type="command:Assignment"
            variable="turn">
          <value
              xsi:type="expression:Operation"
              operator="MULTIPLY">
            <left
                xsi:type="expression:Literal"
                value="-1.0"/>
            <right
                xsi:type="expression:Variable"
                name="turn"/>
          </value>
        </commands>
        <commands
            xsi:type="command:Branch">
          <condition
              xsi:type="condition:Comparison"
              operator="GREATER">
            <left
                xsi:type="expression:Variable"
                name="turn"/>
            <right
                xsi:type="expression:Literal"/>
          </condition>
          <commands
              xsi:type="command:Assignment"
              variable="turn">
            <value
                xsi:type="expression:Operation">
              <left
                  xsi:type="expression:Variable"
                  name="turn"/>
              <right
                  xsi:type="expression:Variable"
                  name="STEP"/>
            </value>
          </commands>
        </commands>
        <commands
            xsi:type="command:Branch">
          <condition
              xsi:type="condition:Comparison">
            <left
                xsi:type="expression:Variable"
                name="turn"/>
            <right
                xsi:type="expression:Literal"/>
          </condition>
          <commands
              xsi:type="command:Assignment"
              variable="turn">
            <value
                xsi:type="expression:Operation"
                operator="MINUS">
              <left
                  xsi:type="expression:Variable"
                  name="turn"/>
              <right
                  xsi:type="expression:Variable"
                  name="STEP"/>
            </value>
          </commands>
        </commands>
      </commands>
      <commands
          xsi:type="command:Assignment"
          variable="i">
        <value
            xsi:type="expression:Operation">
          <left
              xsi:type="expression:Variable"
              name="i"/>
          <right
              xsi:type="expression:Literal"
              value="1.0"/>
        </value>
      </commands>
    </commands>
  </programms>
</robo:Robot>
